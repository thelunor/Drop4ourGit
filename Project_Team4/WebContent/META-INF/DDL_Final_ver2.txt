/* 공인중개사회원 */
DROP TABLE REAUSER 
	CASCADE CONSTRAINTS;

/* 개인회원 */
DROP TABLE GENERICUSER 
	CASCADE CONSTRAINTS;

/* 공인중개사회원 이미지 */
DROP TABLE REAIMAGE 
	CASCADE CONSTRAINTS;

/* 매물이미지 */
DROP TABLE SALEIMAGE 
	CASCADE CONSTRAINTS;

/* 공인중개사 매물일정관리 */
DROP TABLE REASCHEDULE 
	CASCADE CONSTRAINTS;

/* 공인중개사 후기 */
DROP TABLE REVIEW 
	CASCADE CONSTRAINTS;

/* 북마크 */
DROP TABLE BOOKMARK 
	CASCADE CONSTRAINTS;

/* 공인중개사 소개 게시판 */
DROP TABLE REAINTROBOARD 
	CASCADE CONSTRAINTS;

/* 매물 */
DROP TABLE SALE 
	CASCADE CONSTRAINTS;

/* 거래유형 */
DROP TABLE TYPE 
	CASCADE CONSTRAINTS;

/* 관리자 */
DROP TABLE ADMIN 
	CASCADE CONSTRAINTS;

/* 회원코드 */
DROP TABLE USERCODE 
	CASCADE CONSTRAINTS;

/* 공인중개사 회사 이미지 */
DROP TABLE OFFICEIMAGE 
	CASCADE CONSTRAINTS;

/* 공인중개사회원 */
CREATE TABLE REAUSER (
	REAId VARCHAR2(30) NOT NULL, /* 공인중개사 아이디 */
	REAPwd VARCHAR2(30) NOT NULL, /* 공인중개사 비밀번호 */
	REAName VARCHAR2(20) NOT NULL, /* 공인중개사 이름 */
	REAPhoneNum VARCHAR2(30) NOT NULL, /* 공인중개사 휴대폰번호 */
	officeName VARCHAR2(30) NOT NULL, /* 사무소 이름 */
	officeAddr VARCHAR2(100) NOT NULL, /* 사무소 주소 */
	officeDetailAddr VARCHAR2(100) NOT NULL, /* 사무소 상세주소 */
	officeHp VARCHAR2(30) NOT NULL, /* 사무소 전화번호 */
	regNum VARCHAR2(20) NOT NULL, /* 사업자등록번호 */
	USERCODE VARCHAR(10) NOT NULL /* 회원코드 */
);

COMMENT ON TABLE REAUSER IS '공인중개사회원';

COMMENT ON COLUMN REAUSER.REAId IS '공인중개사 아이디';

COMMENT ON COLUMN REAUSER.REAPwd IS '공인중개사 비밀번호';

COMMENT ON COLUMN REAUSER.REAName IS '공인중개사 이름';

COMMENT ON COLUMN REAUSER.REAPhoneNum IS '공인중개사 휴대폰번호';

COMMENT ON COLUMN REAUSER.officeName IS '사무소 이름';

COMMENT ON COLUMN REAUSER.officeAddr IS '사무소 주소';

COMMENT ON COLUMN REAUSER.officeDetailAddr IS '사무소 상세주소';

COMMENT ON COLUMN REAUSER.officeHp IS '사무소 전화번호';

COMMENT ON COLUMN REAUSER.regNum IS '사업자등록번호';

COMMENT ON COLUMN REAUSER.USERCODE IS '회원코드';

CREATE UNIQUE INDEX PK_REAUSER
	ON REAUSER (
		REAId ASC
	);

ALTER TABLE REAUSER
	ADD
		CONSTRAINT PK_REAUSER
		PRIMARY KEY (
			REAId
		);

/* 개인회원 */
CREATE TABLE GENERICUSER (
	userId VARCHAR2(30) NOT NULL, /* 개인회원 아이디 */
	userPwd VARCHAR2(30) NOT NULL, /* 개인회원 비밀번호 */
	userName VARCHAR2(20) NOT NULL, /* 개인회원 이름 */
	frontResNum VARCHAR2(6) NOT NULL, /* 주민번호 앞자리 */
	backResNum VARCHAR2(7) NOT NULL, /* 주민번호 뒷자리 */
	userPhoneNum VARCHAR2(30) NOT NULL, /* 개인회원 휴대폰번호 */
	userAddr VARCHAR2(100) NOT NULL, /* 개인회원 주소 */
	userDetailAddr VARCHAR2(100) NOT NULL, /* 개인회원 상세주소 */
	USERCODE VARCHAR(10) NOT NULL /* 회원코드 */
);

COMMENT ON TABLE GENERICUSER IS '개인회원';

COMMENT ON COLUMN GENERICUSER.userId IS '개인회원 아이디';

COMMENT ON COLUMN GENERICUSER.userPwd IS '개인회원 비밀번호';

COMMENT ON COLUMN GENERICUSER.userName IS '개인회원 이름';

COMMENT ON COLUMN GENERICUSER.frontResNum IS '주민번호 앞자리';

COMMENT ON COLUMN GENERICUSER.backResNum IS '주민번호 뒷자리';

COMMENT ON COLUMN GENERICUSER.userPhoneNum IS '개인회원 휴대폰번호';

COMMENT ON COLUMN GENERICUSER.userAddr IS '개인회원 주소';

COMMENT ON COLUMN GENERICUSER.userDetailAddr IS '개인회원 상세주소';

COMMENT ON COLUMN GENERICUSER.USERCODE IS '회원코드';

CREATE UNIQUE INDEX PK_GENERICUSER
	ON GENERICUSER (
		userId ASC
	);

ALTER TABLE GENERICUSER
	ADD
		CONSTRAINT PK_GENERICUSER
		PRIMARY KEY (
			userId
		);

/* 공인중개사회원 이미지 */
CREATE TABLE REAIMAGE (
	REAId VARCHAR2(30) NOT NULL, /* 공인중개사 아이디 */
	reaImgOriginName VARCHAR2(20), /* 공인중개사회원 사진 원본 파일명 */
	reaImgSaveName VARCHAR2(20) /* 공인중개사회원 사진 저장 파일명 */
);

COMMENT ON TABLE REAIMAGE IS '공인중개사회원 이미지';

COMMENT ON COLUMN REAIMAGE.REAId IS '공인중개사 아이디';

COMMENT ON COLUMN REAIMAGE.reaImgOriginName IS '공인중개사회원 사진 원본 파일명';

COMMENT ON COLUMN REAIMAGE.reaImgSaveName IS '공인중개사회원 사진 저장 파일명';

CREATE UNIQUE INDEX PK_REAIMAGE
	ON REAIMAGE (
		REAId ASC
	);

ALTER TABLE REAIMAGE
	ADD
		CONSTRAINT PK_REAIMAGE
		PRIMARY KEY (
			REAId
		);

/* 매물이미지 */
CREATE TABLE SALEIMAGE (
	saleImgOriginName1 VARCHAR2(300), /* 매물사진 원본 파일명1 */
	saleImgSaveName1 VARCHAR2(300), /* 매물사진 저장 파일명1 */
	saleImgOriginName2 VARCHAR2(300), /* 매물사진 원본 파일명2 */
	saleImgSaveName2 VARCHAR2(300), /* 매물사진 저장 파일명2 */
	saleImgOriginName3 VARCHAR2(300), /* 매물사진 원본 파일명3 */
	saleImgSaveName3 VARCHAR2(300), /* 매물사진 저장 파일명3 */
	aptNum VARCHAR2(20) /* 매물번호 */
);

COMMENT ON TABLE SALEIMAGE IS '매물이미지';

COMMENT ON COLUMN SALEIMAGE.saleImgOriginName1 IS '매물사진 원본 파일명1';

COMMENT ON COLUMN SALEIMAGE.saleImgSaveName1 IS '매물사진 저장 파일명1';

COMMENT ON COLUMN SALEIMAGE.saleImgOriginName2 IS '매물사진 원본 파일명2';

COMMENT ON COLUMN SALEIMAGE.saleImgSaveName2 IS '매물사진 저장 파일명2';

COMMENT ON COLUMN SALEIMAGE.saleImgOriginName3 IS '매물사진 원본 파일명3';

COMMENT ON COLUMN SALEIMAGE.saleImgSaveName3 IS '매물사진 저장 파일명3';

COMMENT ON COLUMN SALEIMAGE.aptNum IS '매물번호';

/* 공인중개사 매물일정관리 */
CREATE TABLE REASCHEDULE (
	scheNum NUMBER NOT NULL, /* 일정번호 */
	scheDate TIMESTAMP NOT NULL, /* 날짜 */
	CONTENT VARCHAR2(1000), /* 내용 */
	REAId VARCHAR2(30) /* 공인중개사 아이디 */
);

COMMENT ON TABLE REASCHEDULE IS '공인중개사 매물일정관리';

COMMENT ON COLUMN REASCHEDULE.scheNum IS '일정번호';

COMMENT ON COLUMN REASCHEDULE.scheDate IS '날짜';

COMMENT ON COLUMN REASCHEDULE.CONTENT IS '내용';

COMMENT ON COLUMN REASCHEDULE.REAId IS '공인중개사 아이디';

CREATE UNIQUE INDEX PK_REASCHEDULE
	ON REASCHEDULE (
		scheNum ASC,
		scheDate ASC
	);

ALTER TABLE REASCHEDULE
	ADD
		CONSTRAINT PK_REASCHEDULE
		PRIMARY KEY (
			scheNum,
			scheDate
		);

/* 공인중개사 후기 */
CREATE TABLE REVIEW (
	reviewNum NUMBER NOT NULL, /* 게시글번호 */
	userId VARCHAR2(30) NOT NULL, /* 개인회원 아이디 */
	REAId VARCHAR2(30) NOT NULL, /* 공인중개사 아이디 */
	reviewContent VARCHAR2(3000), /* 내용 */
	reviewDate DATE /* 날짜 */
);

COMMENT ON TABLE REVIEW IS '공인중개사 후기';

COMMENT ON COLUMN REVIEW.reviewNum IS '게시글번호';

COMMENT ON COLUMN REVIEW.userId IS '개인회원 아이디';

COMMENT ON COLUMN REVIEW.REAId IS '공인중개사 아이디';

COMMENT ON COLUMN REVIEW.reviewContent IS '내용';

COMMENT ON COLUMN REVIEW.reviewDate IS '날짜';

CREATE UNIQUE INDEX PK_REVIEW
	ON REVIEW (
		reviewNum ASC,
		userId ASC,
		REAId ASC
	);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT PK_REVIEW
		PRIMARY KEY (
			reviewNum,
			userId,
			REAId
		);

/* 북마크 */
CREATE TABLE BOOKMARK (
	userId VARCHAR2(30) NOT NULL, /* 개인회원 아이디 */
	aptNum VARCHAR2(20) NOT NULL, /* 매물번호 */
	bookDate DATE /* 날짜 */
);

COMMENT ON TABLE BOOKMARK IS '북마크';

COMMENT ON COLUMN BOOKMARK.userId IS '개인회원 아이디';

COMMENT ON COLUMN BOOKMARK.aptNum IS '매물번호';

COMMENT ON COLUMN BOOKMARK.bookDate IS '날짜';

CREATE UNIQUE INDEX PK_BOOKMARK
	ON BOOKMARK (
		aptNum ASC
	);

ALTER TABLE BOOKMARK
	ADD
		CONSTRAINT PK_BOOKMARK
		PRIMARY KEY (
			aptNum
		);

/* 공인중개사 소개 게시판 */
CREATE TABLE REAINTROBOARD (
	REAId VARCHAR2(30) NOT NULL, /* 공인중개사 아이디 */
	subject VARCHAR2(100), /* 제목 */
	content VARCHAR2(3000) /* 내용 */
);

COMMENT ON TABLE REAINTROBOARD IS '공인중개사 소개 게시판';

COMMENT ON COLUMN REAINTROBOARD.REAId IS '공인중개사 아이디';

COMMENT ON COLUMN REAINTROBOARD.subject IS '제목';

COMMENT ON COLUMN REAINTROBOARD.content IS '내용';

CREATE UNIQUE INDEX PK_REAINTROBOARD
	ON REAINTROBOARD (
		REAId ASC
	);

ALTER TABLE REAINTROBOARD
	ADD
		CONSTRAINT PK_REAINTROBOARD
		PRIMARY KEY (
			REAId
		);

/* 매물 */
CREATE TABLE SALE (
	aptNum VARCHAR2(20) NOT NULL, /* 매물번호 */
	APTSIZE VARCHAR2(10), /* 면적 */
	TYPE VARCHAR2(10), /* 거래유형 */
	ADDR VARCHAR2(200), /* 지번주소 */
	ROADADDR VARCHAR2(200), /* 도로명주소 */
	APTNAME VARCHAR2(100), /* 아파트이름 */
	APTDONG VARCHAR2(10), /* 동 */
	APTHO VARCHAR2(10), /* 호수 */
	PRICE VARCHAR2(20), /* 거래금액 */
	DIRECTION VARCHAR2(20), /* 향 */
	ETC VARCHAR2(3000), /* 매물특징 */
	isContract VARCHAR2(10), /* 계약여부 */
	REAId VARCHAR2(30) /* 공인중개사 아이디 */
);

COMMENT ON TABLE SALE IS '매물';

COMMENT ON COLUMN SALE.aptNum IS '매물번호';

COMMENT ON COLUMN SALE.APTSIZE IS '면적';

COMMENT ON COLUMN SALE.TYPE IS '거래유형';

COMMENT ON COLUMN SALE.ADDR IS '지번주소';

COMMENT ON COLUMN SALE.ROADADDR IS '도로명주소';

COMMENT ON COLUMN SALE.APTNAME IS '아파트이름';

COMMENT ON COLUMN SALE.APTDONG IS '동';

COMMENT ON COLUMN SALE.APTHO IS '호수';

COMMENT ON COLUMN SALE.PRICE IS '거래금액';

COMMENT ON COLUMN SALE.DIRECTION IS '향';

COMMENT ON COLUMN SALE.ETC IS '매물특징';

COMMENT ON COLUMN SALE.isContract IS '계약여부';

COMMENT ON COLUMN SALE.REAId IS '공인중개사 아이디';

CREATE UNIQUE INDEX PK_SALE
	ON SALE (
		aptNum ASC
	);

ALTER TABLE SALE
	ADD
		CONSTRAINT PK_SALE
		PRIMARY KEY (
			aptNum
		);

/* 거래유형 */
CREATE TABLE TYPE (
	type VARCHAR2(10) NOT NULL /* 거래유형 */
);

COMMENT ON TABLE TYPE IS '거래유형';

COMMENT ON COLUMN TYPE.type IS '거래유형';

CREATE UNIQUE INDEX PK_TYPE
	ON TYPE (
		type ASC
	);

ALTER TABLE TYPE
	ADD
		CONSTRAINT PK_TYPE
		PRIMARY KEY (
			type
		);

/* 관리자 */
CREATE TABLE ADMIN (
	adminId VARCHAR2(30) NOT NULL, /* 관리자 아이디 */
	adminPwd VARCHAR2(30) NOT NULL, /* 관리자 비밀번호 */
	USERCODE VARCHAR(10) NOT NULL /* 회원코드 */
);

COMMENT ON TABLE ADMIN IS '관리자';

COMMENT ON COLUMN ADMIN.adminId IS '관리자 아이디';

COMMENT ON COLUMN ADMIN.adminPwd IS '관리자 비밀번호';

COMMENT ON COLUMN ADMIN.USERCODE IS '회원코드';

/* 회원코드 */
CREATE TABLE USERCODE (
	USERCODE VARCHAR(10) NOT NULL, /* 회원코드 */
	USERTYPE VARCHAR2(30) NOT NULL /* 회원구분 */
);

COMMENT ON TABLE USERCODE IS '회원코드';

COMMENT ON COLUMN USERCODE.USERCODE IS '회원코드';

COMMENT ON COLUMN USERCODE.USERTYPE IS '회원구분';

CREATE UNIQUE INDEX PK_USERCODE
	ON USERCODE (
		USERCODE ASC
	);

ALTER TABLE USERCODE
	ADD
		CONSTRAINT PK_USERCODE
		PRIMARY KEY (
			USERCODE
		);

/* 공인중개사 회사 이미지 */
CREATE TABLE OFFICEIMAGE (
	REAId VARCHAR2(30) NOT NULL, /* 공인중개사 아이디 */
	officeImgOriginName VARCHAR2(20), /* 회사 소개 사진 원본 파일명 */
	officeImgSaveName VARCHAR2(20) /* 회사 소개 사진 저장 파일명 */
);

COMMENT ON TABLE OFFICEIMAGE IS '공인중개사 회사 이미지';

COMMENT ON COLUMN OFFICEIMAGE.REAId IS '공인중개사 아이디';

COMMENT ON COLUMN OFFICEIMAGE.officeImgOriginName IS '회사 소개 사진 원본 파일명';

COMMENT ON COLUMN OFFICEIMAGE.officeImgSaveName IS '회사 소개 사진 저장 파일명';

CREATE UNIQUE INDEX PK_OFFICEIMAGE
	ON OFFICEIMAGE (
		REAId ASC
	);

ALTER TABLE OFFICEIMAGE
	ADD
		CONSTRAINT PK_OFFICEIMAGE
		PRIMARY KEY (
			REAId
		);

ALTER TABLE REAUSER
	ADD
		CONSTRAINT FK_USERCODE_TO_REAUSER
		FOREIGN KEY (
			USERCODE
		)
		REFERENCES USERCODE (
			USERCODE
		);

ALTER TABLE GENERICUSER
	ADD
		CONSTRAINT FK_USERCODE_TO_GENERICUSER
		FOREIGN KEY (
			USERCODE
		)
		REFERENCES USERCODE (
			USERCODE
		);

ALTER TABLE REAIMAGE
	ADD
		CONSTRAINT FK_REAUSER_TO_REAIMAGE
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);

ALTER TABLE SALEIMAGE
	ADD
		CONSTRAINT FK_SALE_TO_SALEIMAGE
		FOREIGN KEY (
			aptNum
		)
		REFERENCES SALE (
			aptNum
		);

ALTER TABLE REASCHEDULE
	ADD
		CONSTRAINT FK_REAUSER_TO_REASCHEDULE
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT FK_GENERICUSER_TO_REVIEW
		FOREIGN KEY (
			userId
		)
		REFERENCES GENERICUSER (
			userId
		);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT FK_REAUSER_TO_REVIEW
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);

ALTER TABLE BOOKMARK
	ADD
		CONSTRAINT FK_SALE_TO_BOOKMARK
		FOREIGN KEY (
			aptNum
		)
		REFERENCES SALE (
			aptNum
		);

ALTER TABLE BOOKMARK
	ADD
		CONSTRAINT FK_GENERICUSER_TO_BOOKMARK
		FOREIGN KEY (
			userId
		)
		REFERENCES GENERICUSER (
			userId
		);

ALTER TABLE REAINTROBOARD
	ADD
		CONSTRAINT FK_REAUSER_TO_REAINTROBOARD
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);

ALTER TABLE SALE
	ADD
		CONSTRAINT FK_TYPE_TO_SALE
		FOREIGN KEY (
			TYPE
		)
		REFERENCES TYPE (
			type
		);

ALTER TABLE SALE
	ADD
		CONSTRAINT FK_REAUSER_TO_SALE
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);

ALTER TABLE ADMIN
	ADD
		CONSTRAINT FK_USERCODE_TO_ADMIN
		FOREIGN KEY (
			USERCODE
		)
		REFERENCES USERCODE (
			USERCODE
		);

ALTER TABLE OFFICEIMAGE
	ADD
		CONSTRAINT FK_REAUSER_TO_OFFICEIMAGE
		FOREIGN KEY (
			REAId
		)
		REFERENCES REAUSER (
			REAId
		);